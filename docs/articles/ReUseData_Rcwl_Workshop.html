<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An Example Workshop • RcwlWorkshop</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="An Example Workshop">
<meta property="og:description" content="RcwlWorkshop">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RcwlWorkshop</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ReUseData_Rcwl_Workshop.html">An Example Workshop</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rworkflows/RcwlWorkshop">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>An Example Workshop</h1>
                        <h4 data-toc-skip class="author">Sean Davis<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>
</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/seandavi/BuildABiocWorkshop/blob/HEAD/vignettes/ReUseData_Rcwl_Workshop.Rmd" class="external-link"><code>vignettes/ReUseData_Rcwl_Workshop.Rmd</code></a></small>
      <div class="hidden name"><code>ReUseData_Rcwl_Workshop.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="workshop-title">Workshop Title<a class="anchor" aria-label="anchor" href="#workshop-title"></a>
</h2>
<p>Authors: Author Name<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>, Another Author<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>. <br> Last modified:
14 May, 2018.</p>
<div class="section level3">
<h3 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h3>
<div class="section level4">
<h4 id="description">Description<a class="anchor" aria-label="anchor" href="#description"></a>
</h4>
<p>Along with the topic of your workshop, include how students can
expect to spend their time. For the description may also include
information about what type of workshop it is (e.g. instructor-led live
demo, lab, lecture + lab, etc.). Instructors are strongly recommended to
provide completely worked examples for lab sessions, and a set of
stand-alone notes that can be read and understood outside of the
workshop.</p>
</div>
<div class="section level4">
<h4 id="pre-requisites">Pre-requisites<a class="anchor" aria-label="anchor" href="#pre-requisites"></a>
</h4>
<p>List any workshop prerequisites, for example:</p>
<ul>
<li>Basic knowledge of R syntax</li>
<li>Familiarity with the GenomicRanges class</li>
<li>Familiarity with xyz vignette (provide link)</li>
</ul>
<p>List relevant background reading for the workshop, including any
theoretical background you expect students to have.</p>
<ul>
<li>List any textbooks, papers, or other reading that students should be
familiar with. Include direct links where possible.</li>
</ul>
</div>
<div class="section level4">
<h4 id="participation">Participation<a class="anchor" aria-label="anchor" href="#participation"></a>
</h4>
<p>Describe how students will be expected to participate in the
workshop.</p>
</div>
<div class="section level4">
<h4 id="r-bioconductor-packages-used">
<em>R</em> / <em>Bioconductor</em> packages used<a class="anchor" aria-label="anchor" href="#r-bioconductor-packages-used"></a>
</h4>
<p>List any <em>R</em> / <em>Bioconductor</em> packages that will be
explicitly covered.</p>
</div>
<div class="section level4">
<h4 id="time-outline">Time outline<a class="anchor" aria-label="anchor" href="#time-outline"></a>
</h4>
<p>An example for a 45-minute workshop:</p>
<table class="table">
<thead><tr class="header">
<th>Activity</th>
<th>Time</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Packages</td>
<td>15m</td>
</tr>
<tr class="even">
<td>Package Development</td>
<td>15m</td>
</tr>
<tr class="odd">
<td>Contributing to Bioconductor</td>
<td>5m</td>
</tr>
<tr class="even">
<td>Best Practices</td>
<td>10m</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="workshop-goals-and-objectives">Workshop goals and objectives<a class="anchor" aria-label="anchor" href="#workshop-goals-and-objectives"></a>
</h4>
<p>List “big picture” student-centered workshop goals and learning
objectives. Learning goals and objectives are related, but not the same
thing. These goals and objectives will help some people to decide
whether to attend the conference for training purposes, so please make
these as precise and accurate as possible.</p>
<p><em>Learning goals</em> are high-level descriptions of what
participants will learn and be able to do after the workshop is over.
<em>Learning objectives</em>, on the other hand, describe in very
specific and measurable terms specific skills or knowledge attained. The
<a href="#bloom">Bloom’s Taxonomy</a> may be a useful framework for
defining and describing your goals and objectives, although there are
others.</p>
</div>
<div class="section level4">
<h4 id="learning-goals">Learning goals<a class="anchor" aria-label="anchor" href="#learning-goals"></a>
</h4>
<p>Some examples:</p>
<ul>
<li>describe how to…</li>
<li>identify methods for…</li>
<li>understand the difference between…</li>
</ul>
</div>
<div class="section level4">
<h4 id="learning-objectives">Learning objectives<a class="anchor" aria-label="anchor" href="#learning-objectives"></a>
</h4>
<ul>
<li>analyze xyz data to produce…</li>
<li>create xyz plots</li>
<li>evaluate xyz data for artifacts</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="workshop">Workshop<a class="anchor" aria-label="anchor" href="#workshop"></a>
</h3>
<p>Divide the workshop into sections (<code>## A Section</code>).
Include fully-evaluated <em>R</em> code chunks. Develop exercises and
solutions, and anticipate that your audience will walk through the code
with you, or work on the code idependently – do not be too ambitious in
the material that you present.</p>
</div>
<div class="section level3">
<h3 id="somatic-variant-calling">Somatic variant calling<a class="anchor" aria-label="anchor" href="#somatic-variant-calling"></a>
</h3>
<div class="section level4">
<h4 id="prepare-data">Prepare data<a class="anchor" aria-label="anchor" href="#prepare-data"></a>
</h4>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rworkflow/ReUseData" class="external-link">ReUseData</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">RcwlPipelines</span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: Rcwl</span></span>
<span><span class="co">#&gt; Loading required package: yaml</span></span>
<span><span class="co">#&gt; Loading required package: S4Vectors</span></span>
<span><span class="co">#&gt; Loading required package: stats4</span></span>
<span><span class="co">#&gt; Loading required package: BiocGenerics</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'BiocGenerics'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     IQR, mad, sd, var, xtabs</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     anyDuplicated, aperm, append, as.data.frame, basename, cbind,</span></span>
<span><span class="co">#&gt;     colnames, dirname, do.call, duplicated, eval, evalq, Filter, Find,</span></span>
<span><span class="co">#&gt;     get, grep, grepl, intersect, is.unsorted, lapply, Map, mapply,</span></span>
<span><span class="co">#&gt;     match, mget, order, paste, pmax, pmax.int, pmin, pmin.int,</span></span>
<span><span class="co">#&gt;     Position, rank, rbind, Reduce, rownames, sapply, setdiff, sort,</span></span>
<span><span class="co">#&gt;     table, tapply, union, unique, unsplit, which.max, which.min</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'S4Vectors'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:utils':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     findMatches</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     expand.grid, I, unname</span></span>
<span><span class="co">#&gt; Loading required package: BiocFileCache</span></span>
<span><span class="co">#&gt; Loading required package: dbplyr</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'RcwlPipelines'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:graphics':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     title</span></span>
<span></span>
<span><span class="va">workdir</span> <span class="op">&lt;-</span> <span class="st">"/tmp/workshop"</span></span></code></pre></div>
<ul>
<li>use <code>wget</code> recipe to download files</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">script</span> <span class="op">&lt;-</span> <span class="st">'</span></span>
<span><span class="st">for url in $*</span></span>
<span><span class="st">do</span></span>
<span><span class="st">    wget $url</span></span>
<span><span class="st">done</span></span>
<span><span class="st">'</span></span>
<span><span class="va">wget</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ReUseData/man/recipeMake.html" class="external-link">recipeMake</a></span><span class="op">(</span>shscript <span class="op">=</span> <span class="va">script</span>,</span>
<span>                   paramID <span class="op">=</span> <span class="st">"url"</span>, paramType <span class="op">=</span> <span class="st">"string[]"</span>,</span>
<span>                   outputID <span class="op">=</span> <span class="st">"files"</span>, outputType <span class="op">=</span> <span class="st">"File[]"</span>, outputGlob <span class="op">=</span> <span class="st">"*"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">wget</span><span class="op">$</span><span class="va">url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"https://github.com/hubentu/somatic-snv-test-data/raw/master/tumor.bam"</span>,</span>
<span>              <span class="st">"https://github.com/hubentu/somatic-snv-test-data/raw/master/tumor.bam.bai"</span>,</span>
<span>              <span class="st">"https://github.com/hubentu/somatic-snv-test-data/raw/master/normal.bam"</span>,</span>
<span>              <span class="st">"https://github.com/hubentu/somatic-snv-test-data/raw/master/normal.bam.bai"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ReUseData/man/getData.html" class="external-link">getData</a></span><span class="op">(</span><span class="va">wget</span>, outdir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">workdir</span>, <span class="st">"data"</span><span class="op">)</span>, prefix <span class="op">=</span> <span class="st">"somatic-snv-test-data"</span>,</span>
<span>        notes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tumor(NA12878) bam"</span>, <span class="st">"normal(NA12892) bam"</span>, <span class="st">"somatic test"</span><span class="op">)</span>, showLog <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>alternatively, create a recipe for somatic snv test data.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">script</span> <span class="op">&lt;-</span> <span class="st">'</span></span>
<span><span class="st">wget https://github.com/hubentu/somatic-snv-test-data/raw/master/tumor.bam</span></span>
<span><span class="st">wget https://github.com/hubentu/somatic-snv-test-data/raw/master/tumor.bam.bai</span></span>
<span><span class="st">wget https://github.com/hubentu/somatic-snv-test-data/raw/master/normal.bam</span></span>
<span><span class="st">wget https://github.com/hubentu/somatic-snv-test-data/raw/master/normal.bam.bai</span></span>
<span><span class="st">'</span></span>
<span></span>
<span><span class="va">somatic_snv_testdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ReUseData/man/recipeMake.html" class="external-link">recipeMake</a></span><span class="op">(</span>shscript <span class="op">=</span> <span class="va">script</span>,</span>
<span>                                   outputID <span class="op">=</span> <span class="st">"bams"</span>,</span>
<span>                                   outputGlob <span class="op">=</span> <span class="st">"*.bam*"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">somatic_snv_testdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Rcwl/man/addMeta.html" class="external-link">addMeta</a></span><span class="op">(</span></span>
<span>    cwl <span class="op">=</span> <span class="va">somatic_snv_testdata</span>,</span>
<span>    label <span class="op">=</span> <span class="st">"somatic snv test data"</span>,</span>
<span>    doc <span class="op">=</span> <span class="st">"test data for somatic variant calling"</span>,</span>
<span>    outputLabels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bams"</span><span class="op">)</span>,</span>
<span>    outputDocs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"The data is from NA12878 (tumor) and NA12892 (normal) and represents a tiny chunk of chromsome 21. It was created from 1000 Genomes Project."</span><span class="op">)</span>,</span>
<span>    extensions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        author <span class="op">=</span> <span class="st">"genome/somatic-snv-test-data"</span>,</span>
<span>        url <span class="op">=</span> <span class="st">"https://github.com/genome/somatic-snv-test-data"</span>,</span>
<span>        date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## example data</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ReUseData/man/getData.html" class="external-link">getData</a></span><span class="op">(</span><span class="va">somatic_snv_testdata</span>, outdir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">workdir</span>, <span class="st">"data"</span><span class="op">)</span>,</span>
<span>        notes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"somatic snv"</span>, <span class="st">"tumor normal bams"</span><span class="op">)</span>,</span>
<span>        showLog<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="genomic-data">genomic data<a class="anchor" aria-label="anchor" href="#genomic-data"></a>
</h4>
<p>Get shared genomic data for mutect2.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/ReUseData/man/recipeUpdate.html" class="external-link">recipeUpdate</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/ReUseData/man/recipeSearch.html" class="external-link">recipeSearch</a></span><span class="op">(</span><span class="st">"mutect2"</span><span class="op">)</span></span>
<span><span class="va">rcp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ReUseData/man/recipeLoad.html" class="external-link">recipeLoad</a></span><span class="op">(</span><span class="st">"gcp_gatk_mutect2_b37"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## get panel of normal vcf</span></span>
<span><span class="va">rcp</span><span class="op">$</span><span class="va">filename</span> <span class="op">&lt;-</span> <span class="st">"Mutect2-exome-panel.vcf"</span></span>
<span><span class="va">rcp</span><span class="op">$</span><span class="va">idx</span> <span class="op">&lt;-</span> <span class="st">"idx"</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ReUseData/man/getData.html" class="external-link">getData</a></span><span class="op">(</span><span class="va">rcp</span>, outdir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">workdir</span>, <span class="st">"shareData"</span><span class="op">)</span>,</span>
<span>        notes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mutect2"</span>, <span class="st">"panel of normal"</span><span class="op">)</span>,</span>
<span>        showLog <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## get reference genome</span></span>
<span><span class="va">rcp</span><span class="op">$</span><span class="va">filename</span> <span class="op">&lt;-</span> <span class="st">"Homo_sapiens_assembly19.fasta"</span></span>
<span><span class="va">rcp</span><span class="op">$</span><span class="va">idx</span> <span class="op">=</span> <span class="st">"fai"</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ReUseData/man/getData.html" class="external-link">getData</a></span><span class="op">(</span><span class="va">rcp</span>, outdir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">workdir</span>, <span class="st">"shareData"</span><span class="op">)</span>,</span>
<span>        notes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"human"</span>, <span class="st">"reference genome"</span>, <span class="st">"hg19"</span>, <span class="st">"b37"</span><span class="op">)</span>,</span>
<span>        showLog <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">rcp</span><span class="op">$</span><span class="va">filename</span> <span class="op">&lt;-</span> <span class="st">"Homo_sapiens_assembly19.dict"</span></span>
<span><span class="va">rcp</span><span class="op">$</span><span class="va">idx</span> <span class="op">&lt;-</span> <span class="st">""</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ReUseData/man/getData.html" class="external-link">getData</a></span><span class="op">(</span><span class="va">rcp</span>, outdir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">workdir</span>, <span class="st">"shareData"</span><span class="op">)</span>,</span>
<span>        notes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"human"</span>, <span class="st">"reference genome dict"</span>, <span class="st">"hg19"</span>, <span class="st">"b37"</span><span class="op">)</span>,</span>
<span>        showLog <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>Update load data</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/ReUseData/man/dataUpdate.html" class="external-link">dataUpdate</a></span><span class="op">(</span>dir <span class="op">=</span> <span class="va">workdir</span>, keepTags<span class="op">=</span><span class="cn">FALSE</span>, cleanup <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Updating data record...</span></span>
<span><span class="co">#&gt; normal.bam added</span></span>
<span><span class="co">#&gt; normal.bam.bai added</span></span>
<span><span class="co">#&gt; script.sh added</span></span>
<span><span class="co">#&gt; tumor.bam added</span></span>
<span><span class="co">#&gt; tumor.bam.bai added</span></span>
<span><span class="co">#&gt; Homo_sapiens_assembly19.dict added</span></span>
<span><span class="co">#&gt; Homo_sapiens_assembly19.fasta added</span></span>
<span><span class="co">#&gt; Homo_sapiens_assembly19.fasta.fai added</span></span>
<span><span class="co">#&gt; Mutect2-exome-panel.vcf added</span></span>
<span><span class="co">#&gt; Mutect2-exome-panel.vcf.idx added</span></span>
<span><span class="co">#&gt; dataHub with 10 records</span></span>
<span><span class="co">#&gt; cache path:  /home/qiang/.cache/R/ReUseData </span></span>
<span><span class="co">#&gt; # dataUpdate() to update the local data cache</span></span>
<span><span class="co">#&gt; # dataSearch() to query a specific dataset</span></span>
<span><span class="co">#&gt; # Additional information can be retrieved using: </span></span>
<span><span class="co">#&gt; # dataNames(), dataParams(), dataNotes(), dataPaths(), dataTag() or mcols()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;             name                             </span></span>
<span><span class="co">#&gt;   BFC5138 | normal.bam                       </span></span>
<span><span class="co">#&gt;   BFC5139 | normal.bam.bai                   </span></span>
<span><span class="co">#&gt;   BFC5140 | script.sh                        </span></span>
<span><span class="co">#&gt;   BFC5141 | tumor.bam                        </span></span>
<span><span class="co">#&gt;   BFC5142 | tumor.bam.bai                    </span></span>
<span><span class="co">#&gt;   BFC5143 | Homo_sapiens_assembly19.dict     </span></span>
<span><span class="co">#&gt;   BFC5144 | Homo_sapiens_assembly19.fasta    </span></span>
<span><span class="co">#&gt;   BFC5145 | Homo_sapiens_assembly19.fasta.fai</span></span>
<span><span class="co">#&gt;   BFC5146 | Mutect2-exome-panel.vcf          </span></span>
<span><span class="co">#&gt;   BFC5147 | Mutect2-exome-panel.vcf.idx      </span></span>
<span><span class="co">#&gt;           Path                                                     </span></span>
<span><span class="co">#&gt;   BFC5138 /tmp/workshop/data/normal.bam                            </span></span>
<span><span class="co">#&gt;   BFC5139 /tmp/workshop/data/normal.bam.bai                        </span></span>
<span><span class="co">#&gt;   BFC5140 /tmp/workshop/data/script.sh                             </span></span>
<span><span class="co">#&gt;   BFC5141 /tmp/workshop/data/tumor.bam                             </span></span>
<span><span class="co">#&gt;   BFC5142 /tmp/workshop/data/tumor.bam.bai                         </span></span>
<span><span class="co">#&gt;   BFC5143 /tmp/workshop/shareData/Homo_sapiens_assembly19.dict     </span></span>
<span><span class="co">#&gt;   BFC5144 /tmp/workshop/shareData/Homo_sapiens_assembly19.fasta    </span></span>
<span><span class="co">#&gt;   BFC5145 /tmp/workshop/shareData/Homo_sapiens_assembly19.fasta.fai</span></span>
<span><span class="co">#&gt;   BFC5146 /tmp/workshop/shareData/Mutect2-exome-panel.vcf          </span></span>
<span><span class="co">#&gt;   BFC5147 /tmp/workshop/shareData/Mutect2-exome-panel.vcf.idx</span></span>
<span><span class="va">rs1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ReUseData/man/dataSearch.html" class="external-link">dataSearch</a></span><span class="op">(</span><span class="st">"mutect2"</span><span class="op">)</span></span>
<span><span class="va">rs2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ReUseData/man/dataSearch.html" class="external-link">dataSearch</a></span><span class="op">(</span><span class="st">"reference"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ReUseData/man/dataHub-class.html" class="external-link">dataTags</a></span><span class="op">(</span><span class="va">rs2</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"mutect2"</span></span>
<span><span class="va">rs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ReUseData/man/dataSearch.html" class="external-link">dataSearch</a></span><span class="op">(</span><span class="st">"mutect2"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ref</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ReUseData/man/dataHub-class.html" class="external-link">dataPaths</a></span><span class="op">(</span><span class="va">rs</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">pon</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ReUseData/man/dataHub-class.html" class="external-link">dataPaths</a></span><span class="op">(</span><span class="va">rs</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="run-pipeline">Run pipeline<a class="anchor" aria-label="anchor" href="#run-pipeline"></a>
</h4>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">RcwlPipelines</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/RcwlPipelines/man/cwlUpdate.html" class="external-link">cwlUpdate</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/RcwlPipelines/man/cwlSearch.html" class="external-link">cwlSearch</a></span><span class="op">(</span><span class="st">"mutect2"</span><span class="op">)</span></span>
<span><span class="va">mutect2pl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/RcwlPipelines/man/cwlLoad.html" class="external-link">cwlLoad</a></span><span class="op">(</span><span class="st">"pl_Mutect2PL"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/Rcwl/man/plotCWL.html" class="external-link">plotCWL</a></span><span class="op">(</span><span class="va">mutect2pl</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## run simple tool instead of pipeline because of large files</span></span>
<span><span class="va">mutect2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/RcwlPipelines/man/cwlLoad.html" class="external-link">cwlLoad</a></span><span class="op">(</span><span class="st">"tl_Mutect2"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## change to smaller docker image</span></span>
<span><span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/RcwlPipelines/man/searchContainer.html" class="external-link">searchContainer</a></span><span class="op">(</span><span class="st">"gatk4"</span><span class="op">)</span></span>
<span><span class="va">req1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Rcwl/man/cwl-requirements.html" class="external-link">requireDocker</a></span><span class="op">(</span><span class="va">ds</span><span class="op">[</span><span class="fl">1</span>, <span class="st">"container"</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/Rcwl/man/cwlProcess-methods.html" class="external-link">requirements</a></span><span class="op">(</span><span class="va">mutect2</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">req1</span></span>
<span></span>
<span><span class="co">## check inputs</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/Rcwl/man/cwlProcess-methods.html" class="external-link">inputs</a></span><span class="op">(</span><span class="va">mutect2</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## prepare capture region</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">21</span>, <span class="fl">10400000</span>, <span class="fl">10500000</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">workdir</span>, <span class="st">"region.bed"</span><span class="op">)</span>,</span>
<span>            row.names<span class="op">=</span><span class="cn">FALSE</span>, col.names <span class="op">=</span> <span class="cn">FALSE</span>, quote<span class="op">=</span><span class="cn">FALSE</span>, sep<span class="op">=</span><span class="st">"\t"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## assign inputs</span></span>
<span><span class="va">mutect2</span><span class="op">$</span><span class="va">tbam</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">workdir</span>, <span class="st">"data/tumor.bam"</span><span class="op">)</span></span>
<span><span class="va">mutect2</span><span class="op">$</span><span class="va">nbam</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">workdir</span>, <span class="st">"data/normal.bam"</span><span class="op">)</span></span>
<span><span class="va">mutect2</span><span class="op">$</span><span class="va">normal</span> <span class="op">&lt;-</span> <span class="st">"NA12892"</span></span>
<span><span class="va">mutect2</span><span class="op">$</span><span class="va">Ref</span> <span class="op">&lt;-</span> <span class="va">ref</span></span>
<span><span class="va">mutect2</span><span class="op">$</span><span class="va">pon</span> <span class="op">&lt;-</span> <span class="va">pon</span></span>
<span><span class="va">mutect2</span><span class="op">$</span><span class="va">interval</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">workdir</span>, <span class="st">"region.bed"</span><span class="op">)</span></span>
<span><span class="va">mutect2</span><span class="op">$</span><span class="va">out</span> <span class="op">&lt;-</span> <span class="st">"somatic.vcf"</span></span>
<span></span>
<span><span class="co">## run tool</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/Rcwl/man/runCWL.html" class="external-link">runCWL</a></span><span class="op">(</span><span class="va">mutect2</span>, outdir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">workdir</span>, <span class="st">"output"</span><span class="op">)</span>, docker <span class="op">=</span> <span class="st">"udocker"</span>, showLog <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">workdir</span>, <span class="st">"output"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "f1r2.tar.gz"       "somatic.vcf"       "somatic.vcf.idx"  </span></span>
<span><span class="co">#&gt; [4] "somatic.vcf.stats"</span></span></code></pre></div>
</div>
</div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr>
<ol>
<li id="fn1"><p><a href="mailto:seandavi@gmail.com" class="email">seandavi@gmail.com</a><a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>Institution<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>Another Institution<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Qian Liu.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
